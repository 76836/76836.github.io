<!DOCTYPE html>
<html>
	<meta name="viewport" content="initial-scale=1">
<head>
    <meta charset="UTF-8" />
    <title>Market</title>
</head>
<body>
    
 <h1 class="apptitle"> Mist OS Market </h1>
 <button class="elementbasic" onclick="location.reload();">Update package list.</button>

<div class="appdiv">
<p class="apptitle">Goblin.tools </p>
<div class="line"></div>
<img class="icon" src="https://goblin.tools/favicon.ico">
<div class="buttonsdiv"> 
<button class="installbutton" onclick="A2HS('https://goblin.tools');">Install</button>
<br>
<button class="uninstallbutton" onclick="uninstall('https://goblin.tools');">Uninstall</button>
</div>
</div>

<div class="appdiv">
    <p class="apptitle">Krunker.io FPS game</p>
    <div class="line"></div>
    <img class="icon" src="https://ih1.redbubble.net/image.1275406961.4962/st,small,507x507-pad,600x600,f8f8f8.jpg">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://krunker.io');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://krunker.io');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">Microsoft Bing</p>
    <div class="line"></div>
    <img class="icon" src="https://bing.com/apple-touch-icon.png">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://bing.com');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://bing.com');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">Calculator</p>
    <div class="line"></div>
    <img class="icon" src="./calculator/apple-touch-icon.png">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('./calculator');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('./calculator');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">AniWatch</p>
    <div class="line"></div>
    <img class="icon" src="https://aniwatch.to/apple-touch-icon.png">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://aniwatch.to');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://aniwatch.to');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">Github</p>
    <div class="line"></div>
    <img class="icon" src="https://github.com/apple-touch-icon.png">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://github.com');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://github.com');">Uninstall</button>
    </div>
</div>
<div class="appdiv">
    <p class="apptitle">Amazon Canada</p>
    <div class="line"></div>
    <img class="icon" src="https://amazon.ca/favicon.ico">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://amazon.ca');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://amazon.ca');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">2048 Game</p>
    <div class="line"></div>
    <img class="icon" src="https://2048game.com/favicon.ico">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://2048game.com');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://2048game.com');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">Paper io</p>
    <div class="line"></div>
    <img class="icon" src="https://Paper-io.com/favicon.ico">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://paper-io.com');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://paper-io.com');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">YouTube</p>
    <div class="line"></div>
    <img class="icon" src="https://youtube.com/favicon.ico">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://youtu.be');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://youtu.be');">Uninstall</button>
    </div>
</div>

<div class="appdiv">
    <p class="apptitle">Google Search</p>
    <div class="line"></div>
    <img class="icon" src="https://google.com/favicon.ico">
    <div class="buttonsdiv">
        <button class="installbutton" onclick="A2HS('https://google.com');">Install</button>
        <br>
        <button class="uninstallbutton" onclick="uninstall('https://google.com');">Uninstall</button>
    </div>
</div>
<!--

<div class="appdiv">
    <p class="apptitle">name</p>
    <div class="line"></div>
    <img class="icon" src="https://url/apple-touch-icon.png">
    <div class="buttonsdiv"> 
    <button class="installbutton" onclick="A2HS('https://');">Install</button>
    <br>
    <button class="uninstallbutton" onclick="uninstall('https://');">Uninstall</button>
    </div>
    </div>


-->
                
	<p class="apptitle"> Mist OS Market v1.1 </p>
 <button class="elementbasic" onclick="window.location='./help';">help</button>
</body>

<script>
console.log('### S E T T I N G S   A P P');
//###startup
//Read apps index from localstorage

var DEJSONIFY = localStorage.getItem('MIST_APPS');
var apps = JSON.parse(DEJSONIFY);
if (apps == null) {
alert('Mist Market has stopped.');
window.location="/home";
}
else {
    var DEJSONIFY = localStorage.getItem('MIST_APPS');
    var apps = JSON.parse(DEJSONIFY);
    console.log('App index read succesful:');
};
console.log(apps);


var ExCSS1 = document.createElement("style");
  ExCSS1.innerHTML =`		body  {
	background-color: #111111;
	background-repeat: no-repeat;
	background-size: cover;
	overflow-x: hidden;
        color:white;
        min-height:100vh;
        width:100vw;
        margin:0;
        padding:0;
			}`;

  var head = document.getElementsByName("head")[0];
  document.head.appendChild(ExCSS1);
    
    
//###functions catalog
function A2HS(APPURL) {
            //read text box contents
          var A2I = APPURL;
          console.log('A2HS:'+A2I);
          // confirm install
          if (confirm('do you really want to install '+A2I) == false) {
		  alert('install cancelled');
		  return;
	  };
            //retrieve apps index
          var DEJSONIFY = localStorage.getItem('MIST_APPS');
          var apps = JSON.parse(DEJSONIFY);
            //add subject to apps index
          apps.push(A2I);
            //note the app's position so it can be uninstalled
          localStorage.setItem(A2I, apps.indexOf(A2I));
            //save the updated index
          var JSONIFY = JSON.stringify(apps);
          localStorage.setItem('MIST_APPS', JSONIFY);
            // alert the user of the change
	        alert('installed '+A2I);
        };

function uninstall(UNAPPURL) {
            //read text box contents
          var NUM=localStorage.getItem(UNAPPURL);
  if (NUM == null) {
    alert('Uninstall failed: Specified app does not exist.');
    return;
  };
	  var NUM = Number(NUM);
          console.log('uninstall:'+NUM);
            //retrieve apps index
          var DEJSONIFY = localStorage.getItem('MIST_APPS');
          var apps = JSON.parse(DEJSONIFY);
            //add subject to apps index
          apps.splice(NUM, 1);
            //save the updated index
          var JSONIFY = JSON.stringify(apps);
          localStorage.setItem('MIST_APPS', JSONIFY);
            // alert the user of the change
	        alert('Uninstalled app no.'+NUM);
        };


    
</script>





<style>
    .apptitle{
        clear: right;
        width:100%; 
        text-align: center;
        font-size: x-large;
        margin:3px;
        font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    }
    .line{
        border-bottom: 3px solid white;
        width: 100vw;
    }
    .elementbasic {
        width:100vw;
        height:10vh;
        background-color:gray;
        border: 5px inset black;
        margin:0;
        padding:0px;
        font-size: xx-large;
	border-radius: 5px;
    }
    .elementbasic:hover {
        width:100vw;
        height:10vh;
        background-color:darkgray;
        border: 5px inset darkcyan;
        margin:0;
        padding:0px;
        font-size: xx-large;
	border-radius: 0px;
    }
      .installbutton {
        width:45vw;
        height:5vh;
        background-color:green;
        border: 3px solid black;
        margin:0;
        padding:0px;
        font-size: xx-large;
    }
      .uninstallbutton {
        width:45vw;
        height:5vh;
        background-color: darkred;
        border: 3px solid black;
        margin:0;
        padding:0px;
        font-size: xx-large;
      }
      .buttonsdiv {
        float: right;
        clear: right;
      }
      .icon{
        width:8vh;
        height:8vh;
        border-radius: 8vh;
        padding:1vh;
        margin:0;
      }
      .appdiv{
        border:3px solid white;
        border-radius: 2vh;
        margin-bottom: 3vh;
      }
</style>

</html>
