<!DOCTYPE html>
<head>
	<title>VOS Desktop v2.2 public release</title>
</head>
<html>	
	<style type="text/css">
		body  {
			background-image: url("../Wallpaper.jpg");
  			background-color: black;
			background-repeat: no-repeat;
			background-size: cover;
			overflow: clip;
			}
		.buttonx {
			border-radius:0px;
			color:black;
			height:100%;
			background-color:red;
			position:sticky;
			right: 0;
		}
		.icon {
			border-radius:4vw;
			border: 0.5vw solid black;
			font-size: xx-large;
			font-weight: bolder;
			color:black;
			height:7vw;
			width:7vw;
			background-color:transparent;
			position:fixed;
			right: 0;
			bottom: 0;
			margin: 1vw;
		}
		.pwricon {
			height:7vw;
			width:7vw;
			background-color:transparent;
			position:fixed;
			right: 0;
			bottom: 8vw;
			margin: 1vw;
		}
		.buttonback {
			border-radius:0px;
			border: 0px solid black;
			color:white;
			height:100%;
			background-color:black;
		}

	.div {
	  position: absolute;
	  z-index: 7;
	  background-color: transparent;
	  text-align: right;
	  border: 1px solid black;
	  overflow: hidden;
	  resize: both;
	  border-radius: 10px;
	  transition-duration: 0.4;
	}
	.div:Hover{
	  position: absolute;
	  z-index: 9;
	  background-color: transparent;
	  text-align: right;
	  border: 1px solid cyan;
	  overflow: hidden;
	  resize: both;
	  border-radius: 0px;
	}
	.closed {
		z-index: -100;
		height: 0px;
		width: 0px;
		position:fixed;
		bottom:0;
	}
	.divheader {
	  cursor: move;
	  z-index: 10;
	  background-color: black;
	  color: white;
	  overflow: auto;
	  height: 3vh;
	}
	</style>
	<body>

<div id="ActiveZone">

</div>



<script >
	var windows = 0;
	//when this program starts, there are 0 windows open

	var part1 = `<div style="" class="div" id="mydiv`;
	var part2 = `"> 
	  <iframe Width="100%" Height="97vh" src="https://76836.github.io/DesktopLauncher"></iframe>
	  <div class="divheader" id="mydiv`;
	var part3 = `header"><button class="buttonx" onclick="Close(`;
	var part4 = `)">X</button><button class="buttonback" onclick="history.back()">‚óÅ</button></div>
	</div>`;
	//all the pieces needed to build a window

	//function
	function dragElement(elmnt) {
	  console.log('drag element'+elmnt);
	  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
	  if (document.getElementById(elmnt.id + "header")) {
		/* if present, the header is where you move the DIV from:*/
		document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
	  } else {
		/* otherwise, move the DIV from anywhere inside the DIV:*/
		elmnt.onmousedown = dragMouseDown;
	  }
	
	  function dragMouseDown(e) {
		e = e || window.event;
		e.preventDefault();
		// get the mouse cursor position at startup:
		pos3 = e.clientX;
		pos4 = e.clientY;
		document.onmouseup = closeDragElement;
		// call a function whenever the cursor moves:
		document.onmousemove = elementDrag;
	  }
	
	  function elementDrag(e) {
		e = e || window.event;
		e.preventDefault();
		// calculate the new cursor position:
		pos1 = pos3 - e.clientX;
		pos2 = pos4 - e.clientY;
		pos3 = e.clientX;
		pos4 = e.clientY;
		// set the element's new position:
		elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
		elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
	  }
	
	  function closeDragElement() {
		/* stop moving when mouse button is released:*/
		document.onmouseup = null;
		document.onmousemove = null;
	  }
	}

		async function Open()
		  {
		var NewWindow = part1+String(windows)+part2+String(windows)+part3+String(windows)+part4 ;
		//
		var d1 = document.getElementById('ActiveZone');
		d1.insertAdjacentHTML('afterend', NewWindow);
		//
		console.log('opened window '+String(windows))
		dragElement (document.getElementById("mydiv"+String(windows)));
		windows = windows + 1 ;
		  }

		function Close(Target)
		  {
		document.getElementById("mydiv"+String(Target)).className="closed";
		document.getElementById("mydiv"+String(Target)).innerHTML="";
		console.log('closed window ' + String(Target))
		  }
	</script>

		
		<div id="B1">
		<button class="icon" onclick="Open()" >+</img>
		</div>
	
		<div id="B2">
		<image style="width: 5vw;" class="pwricon" onclick="window.location='./';" src="/PWR.png"></img>
		</div>

	</body>
	</html>
	
